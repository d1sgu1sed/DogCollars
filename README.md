# DogCollars
DogCollars — проект, созданный для отслеживания бездомных собак и оказания им помощи. DogCollars был написан с использованием языка программирования Python и фреймворка FastAPI.

## Как это работает?
Создаются запросы на фреймворке FastAPI, представляющие из себя обработку данных (геолокации, текст заданий, ID'шники и т.д.). К приложению подключена база данных на PostgreSQL, геолокация ошейников отслеживается с помощью базовой станции LoRa.

## Сценарии использования:
  - Регистрация/вход пользователя;
  - Создание профилей для собак + регистрация ошейника (ID ошейника, кличка, пол и пометка является ли собака отслеживаемой);
  - Вывод активных ошейников и их геолокации;
  - Пост задачи для одной собаки только для зарегистрированного пользователя;
  - Вывод активной задачи для выбранной собаки и вывод всех активных задач;
  - Отметить задачу как выполненную (доступно, если геолокация пользователя находится в определённом радиусе от геолокации ошейника).
    
## FastAPI
  - Запрос на регистрацию пользователя. Параметры: имя, фамилия, адрес почты, пароль;
  - Запрос на вход пользователя. Параметры: адрес почты, пароль;
  - Запрос на вывод профиля определенного пользователя. Параметры: ID профиля, токен сессии (передается автоматически);
  - Запрос на удаление профиля пользователя. Параметры: ID профиля, токен сессии (передается автоматически);
  - Запрос на обновление профиля пользователя. Параметры: ID профиля, желаемые изменения, токен сессии (передается автоматически);
  - Запрос на выдачу/отзыв привилегий администратора. Параметры: ID профиля, токен сессии (передается автоматически);
  - Запрос на создание профиля собаки. Параметры: кличка, пол, токен сессии (передается автоматически);
  - Запрос на вывод профиля определенной собаки. Параметры: ID ошейника, токен сессии (передается автоматически);
  - Запрос на удаление профиля собаки. Параметры: ID ошейника, токен сессии (передается автоматически);
  - Запрос на обновление профиля собаки. Параметры: ID ошейника, желаемые изменения, токен сессии (передается автоматически);
  - Запрос на вывод местоположения собаки. Параметры: ID ошейника, токен сессии (передается автоматически);
  - Запрос на обновление местоположения собаки. Параметры: ID ошейника, долгота и широта, токен сессии (передается автоматически);
  - Запрос на вывод всех активных ошейников. Параметры: токен сессии (передается автоматически);
  - Запрос на пост задачи. Параметры: ID ошейника, описание задачи, токен сессии (передается автоматически);
  - Запрос на вывод задач для определенной собаки. Параметры: ID ошейника, токен сессии (передается автоматически);
  - Запрос на вывод всех задач. Параметры: токен сессии (передается автоматически);
  - Запрос на вывод выполненных задач пользователя. Параметры: ID пользователя, токен сессии (передается автоматически);
  - Запрос на обновление задачи. Параметры: желаемые изменения, токен сессии (передается автоматически);
  - Запрос на отметку выполнения задачи. Параметры: геолокация пользователя (автоматически), геолокация выбранной собаки (автоматически), токен сессии (передается автоматически).

## Настройка и установка проекта:
При необходимости сделать ```chmod +x ./scripts/<script_name>.sh``` для всех скриптов!

### Для установки всех библиотек python и linux:
Запускаем в папке проекта
```
pip install .
./scripts/configure.sh
```

### Для поднятия сервисов баз для локальной разработки нужно запустить команду:
```
sudo make up
```

### Создание миграций и настройка alembic:
Для этого написан специальный скрипт, который запускается из папки проекта командой:
```
./scripts/init.sh
```

### Удаление миграций и отключение сервера:
```
sudo make down
./scripts/delete.sh
```